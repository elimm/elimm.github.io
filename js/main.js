"use strict";!function(t,e){var n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Array.prototype.slice.call(n.querySelectorAll(e))},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments[2];return new Promise(function(a){var o=new XMLHttpRequest;o.open(e,t),o.responseType="json",o.addEventListener("load",function(){return 200===o.status&&o.response?a(o.response):[]}),o.send(n)})},o=function(){var a=function(){return e.pageYOffset||t.documentElement.scrollTop},o=function(t,e){return"-"+Math.floor(t*e)+"px"},r=n("#header")[0],i=r.clientHeight;return function(){return e.addEventListener("scroll",function(){var t=a();t>i||(r.style.backgroundPositionY=o(t,2)+", "+o(t,.25))})}}(),r=function(){var t=n("#contact-form")[0],e=n("#contact-name",t)[0],o=n("#contact-email",t)[0],r=n("#contact-message",t)[0],i=n("#contact-send",t)[0],s=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.value.trim(),a=n.length;return e?/^[a-z0-9_+-.]+@[a-z0-9.-]+\.[a-z]+$/i.test(n):a>0&&a<3e3};t.addEventListener("keyup",function(){var t=s(e)&&s(o,!0)&&s(r);i.disabled=!t}),t.addEventListener("submit",function(t){t.preventDefault();var n=new FormData;n.set(e.name,e.value.trim()),n.set(o.name,o.value.trim().toLowerCase()),n.set(r.name,r.value.trim()),a("http://demos.adr.com.ua","POST",n).then(function(){var t=i.textContent;e.value="",o.value="",r.value="",i.disabled=!0,i.classList.add("contact__button_ok"),i.textContent="Thanks",setTimeout(function(){i.textContent=t,i.classList.remove("contact__button_ok")},3e3)})})},i=function(){o(),r(),a("/list.json").then(function(t){return Promise.all(t.map(function(t){return new Promise(function(e){var n=new Image;n.src=t.thumbnail,n.alt=t.title+" screenshot",n.className="work__img",n.addEventListener("load",function(){t.image=n,e(t)})})}))}).then(function(e){var a=n("#work__wrap")[0];e.sort(function(){return Math.random()-.5}).forEach(function(e){var n=t.createElement("div"),o=t.createElement("a");n.className="work__item",o.href=e.link,o.className="work__link",o.target="_blank",o.textContent=e.title,n.appendChild(e.image),n.appendChild(o),a.appendChild(n)})})};"loading"===t.readyState?t.addEventListener("DOMContentLoaded",i):i()}(document,window);